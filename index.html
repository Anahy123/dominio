<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Desigualdades Lineales y Cuadráticas</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    input, select { margin: 5px; }
    .resultado { margin-top: 20px; font-weight: bold; }
    #grafico { width: 100%; height: 400px; }
  </style>
</head>
<body>

<h2>Resolver desigualdad lineal o cuadrática</h2>

<label>a: <input type="number" id="a" step="any" value="1"></label>
<label>b: <input type="number" id="b" step="any" value="0"></label>
<label>c: <input type="number" id="c" step="any" value="0"></label>
<br>
<label>Tipo de desigualdad:
  <select id="tipo">
    <option value="<"> &lt; </option>
    <option value="<="> &le; </option>
    <option value=">"> &gt; </option>
    <option value=">="> &ge; </option>
  </select>
</label>

<button onclick="resolver()">Resolver y Graficar</button>

<div class="resultado" id="resultado"></div>
<div id="grafico"></div>

<script>
function resolver() {
  const a = parseFloat(document.getElementById("a").value);
  const b = parseFloat(document.getElementById("b").value);
  const c = parseFloat(document.getElementById("c").value);
  const tipo = document.getElementById("tipo").value;
  const resultadoDiv = document.getElementById("resultado");

  const funcion = x => a * x * x + b * x + c;
  let texto = `Función: f(x) = ${a}x² + ${b}x + ${c} ${tipo} 0<br>`;
  let intervalo = "";

  let x1 = null, x2 = null;
  if (a !== 0) {
    const D = b * b - 4 * a * c;
    if (D < 0) {
      if ((tipo === "<" && a > 0) || (tipo === ">" && a < 0)) {
        intervalo = "x ∈ ℝ (toda la recta real)";
      } else {
        intervalo = "∅ (no hay solución)";
      }
    } else {
      x1 = (-b - Math.sqrt(D)) / (2 * a);
      x2 = (-b + Math.sqrt(D)) / (2 * a);
      const ordenados = [x1, x2].sort((a, b) => a - b);
      x1 = ordenados[0];
      x2 = ordenados[1];

      if (a > 0) {
        if (tipo === "<") intervalo = `x ∈ (${x1.toFixed(2)}, ${x2.toFixed(2)})`;
        else if (tipo === "<=") intervalo = `x ∈ [${x1.toFixed(2)}, ${x2.toFixed(2)}]`;
        else if (tipo === ">") intervalo = `x ∈ (-∞, ${x1.toFixed(2)}) ∪ (${x2.toFixed(2)}, ∞)`;
        else intervalo = `x ∈ (-∞, ${x1.toFixed(2)}] ∪ [${x2.toFixed(2)}, ∞)`;
      } else {
        if (tipo === "<") intervalo = `x ∈ (-∞, ${x1.toFixed(2)}) ∪ (${x2.toFixed(2)}, ∞)`;
        else if (tipo === "<=") intervalo = `x ∈ (-∞, ${x1.toFixed(2)}] ∪ [${x2.toFixed(2)}, ∞)`;
        else if (tipo === ">") intervalo = `x ∈ (${x1.toFixed(2)}, ${x2.toFixed(2)})`;
        else intervalo = `x ∈ [${x1.toFixed(2)}, ${x2.toFixed(2)}]`;
      }
    }
  } else {
    // Función lineal
    if (b === 0) {
      intervalo = c == 0 && (tipo === "<=" || tipo === ">=") ? "x ∈ ℝ" : "∅ (no hay solución)";
    } else {
      const x0 = -c / b;
      if ((b > 0 && tipo === "<") || (b < 0 && tipo === ">")) intervalo = `x ∈ (-∞, ${x0.toFixed(2)})`;
      else if ((b > 0 && tipo === "<=") || (b < 0 && tipo === ">=")) intervalo = `x ∈ (-∞, ${x0.toFixed(2)}]`;
      else if ((b > 0 && tipo === ">") || (b < 0 && tipo === "<")) intervalo = `x ∈ (${x0.toFixed(2)}, ∞)`;
      else intervalo = `x ∈ [${x0.toFixed(2)}, ∞)`;
    }
  }

  texto += `📌 Intervalo que satisface la desigualdad: <strong>${intervalo}</strong>`;
  resultadoDiv.innerHTML = texto;

  // Graficar función
  const x_vals = [], y_vals = [];
  const xmin = x1 !== null ? x1 - 5 : -10;
  const xmax = x2 !== null ? x2 + 5 : 10;
  for (let x = xmin; x <= xmax; x += 0.1) {
    x_vals.push(x);
    y_vals.push(funcion(x));
  }

  Plotly.newPlot("grafico", [{
    x: x_vals,
    y: y_vals,
    type: "scatter",
    name: "f(x)",
    line: { color: "blue" }
  }, {
    x: [xmin, xmax],
    y: [0, 0],
    type: "scatter",
    mode: "lines",
    name: "y = 0",
    line: { dash: "dot", color: "red" }
  }], {
    title: "Gráfico de la función",
    xaxis: { title: "x" },
    yaxis: { title: "f(x)" }
  });
}
</script>

</body>
</html>

